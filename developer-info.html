<!DOCTYPE html>
<html lang="ar" dir="rtl" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>عن المطور | يحيى رضا (نسخة مطورة)</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* =======================================================
      1. المتغيرات الأساسية (كما هي مع تعديلات طفيفة)
      =======================================================
    */
    :root {
      --business-gold: #bfa76a;
      --business-dark: #23272e;
      --business-bg: #f5f4f1;
      --business-white: #fff;
      --business-gray: #e5e3dc;
      --business-shadow: #d6cfc1;
      --business-blue: #2d3a4a;
      --transition-speed: 0.3s;
      
      /* متغيرات جديدة للتأثير التفاعلي */
      --mouse-x: 50%;
      --mouse-y: 50%;
      --glow-opacity: 0;
      --glow-color: rgba(255, 255, 255, 0.4);
    }

    [data-theme="dark"] {
      --business-gold: #c9b47e;
      --business-dark: #e1e1e1;
      --business-bg: #1a1d23;
      --business-white: #23272e;
      --business-gray: #3a414e;
      --business-shadow: #00000033;
      --business-blue: #a6c1ee;
      --glow-color: rgba(255, 255, 255, 0.1);
    }

    html, body {
      min-height: 100vh;
      background: linear-gradient(120deg, var(--business-bg) 0%, var(--business-gray) 100%);
      color: var(--business-dark);
      font-family: 'Montserrat', 'Cairo', sans-serif;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      transition: background var(--transition-speed), color var(--transition-speed);
      
      /* نحتاج هذا لعرض البطاقة في المنتصف لتأثير الميل */
      display: grid;
      place-items: center;
    }
    
    /* =======================================================
      2. (جديد) - الحاوية ثلاثية الأبعاد
      =======================================================
    */
    .card-wrapper {
      /* يحدد عمق المنظور ثلاثي الأبعاد */
      perspective: 1500px;
      margin: 32px 16px;
      z-index: 2;
    }

    /* =======================================================
      3. البطاقة (تعديلات)
      =======================================================
    */
    .business-card {
      background: var(--business-white);
      border-radius: 32px;
      box-shadow: 0 0 32px 0 var(--business-shadow), 0 0 0 2px var(--business-gold)33;
      border: 2.5px solid var(--business-gold);
      max-width: 420px;
      padding: 48px 28px 36px 28px;
      color: var(--business-dark);
      position: relative;
      overflow: hidden;
      /* (تعديل) - إضافة انتقالات جديدة للميل واللمعان */
      transition: 
        box-shadow var(--transition-speed), 
        border var(--transition-speed), 
        background var(--transition-speed),
        transform 0.1s cubic-bezier(0.23, 1, 0.32, 1); /* انتقال ناعم للميل */
      
      /* (جديد) - يخبر المتصفح بالتعامل مع العناصر الداخلية كـ 3D */
      transform-style: preserve-3d; 
      /* تطبيق الميل الأولي (سيتم تحديثه بـ JS) */
      transform: rotateX(0deg) rotateY(0deg); 
      
      animation: fadeInCard 1.2s cubic-bezier(.4,2,.6,1);
    }
    
    @keyframes fadeInCard {
      from { opacity: 0; transform: translateY(40px) scale(0.95); }
      to { opacity: 1; transform: none; }
    }

    .business-card::before {
      content: '';
      position: absolute; inset: 0;
      background: linear-gradient(120deg, #fffbe6 0%, #bfa76a11 60%, #f7f7fa 100%);
      opacity: 0.13;
      filter: blur(14px);
      z-index: -1;
      pointer-events: none;
    }
    
    /* (جديد) - طبقة اللمعان التفاعلية */
    .business-card::after {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      border-radius: 32px; /* لمطابقة البطاقة */
      
      /* اللمعان يتبع الفأرة باستخدام المتغيرات */
      background: radial-gradient(
        circle at var(--mouse-x) var(--mouse-y), 
        var(--glow-color) 0%, 
        transparent 35%
      );
      
      opacity: var(--glow-opacity);
      transition: opacity 0.3s;
      pointer-events: none;
      z-index: 3; /* فوق كل شيء داخل البطاقة */
    }
    
    [data-theme="dark"] .business-card::before {
        opacity: 0.05;
    }
    
    /* =======================================================
      4. باقي العناصر (كما هي) - مع إضافة z-index
      =======================================================
    */
    .avatar {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      border: 3px solid var(--business-gold);
      box-shadow: 0 0 24px var(--business-shadow);
      margin: 0 auto 22px auto;
      display: block;
      background: var(--business-white);
      transition: box-shadow var(--transition-speed), transform var(--transition-speed), border var(--transition-speed);
      z-index: 1;
      position: relative;
      animation: floatAvatar 3.5s ease-in-out infinite;
      cursor: pointer;
      /* (جديد) - إعطاء عمق للصورة */
      transform: translateZ(50px); 
    }

    @keyframes floatAvatar {
      0%,100% { transform: translateY(0) translateZ(50px); }
      50% { transform: translateY(-10px) scale(1.04) translateZ(50px); }
    }

    .dev-name {
      font-size: 2.2rem;
      color: var(--business-gold);
      text-shadow: 0 0 8px var(--business-shadow), 0 0 2px var(--business-white)11;
      font-family: 'Montserrat', 'Cairo', sans-serif;
      margin-bottom: 10px;
      letter-spacing: 2px;
      text-align: center;
      font-weight: bold;
      animation: fadeInName 1.2s 0.3s cubic-bezier(.4,2,.6,1) backwards;
      transition: color var(--transition-speed), text-shadow var(--transition-speed);
      /* (جديد) - إعطاء عمق للنص */
      transform: translateZ(30px); 
    }
    
    @keyframes fadeInName {
      from { opacity: 0; transform: translateY(-20px) translateZ(30px); }
      to { opacity: 1; transform: translateZ(30px); }
    }

    .dev-title {
      color: var(--business-blue);
      font-size: 1.1rem;
      text-align: center;
      margin-bottom: 18px;
      font-weight: 700;
      letter-spacing: 1.2px;
      opacity: 0.85;
      transition: color var(--transition-speed);
      /* (جديد) - إعطاء عمق للنص */
      transform: translateZ(20px); 
    }

    .dev-bio {
      font-size: 1.08rem;
      color: var(--business-dark);
      margin-bottom: 28px;
      line-height: 2.1;
      background: var(--business-bg);
      border-radius: 16px;
      padding: 10px 12px;
      box-shadow: 0 2px 12px var(--business-shadow);
      text-align: center;
      font-family: 'Cairo', 'Montserrat', sans-serif;
      animation: fadeInBio 1.2s 0.5s cubic-bezier(.4,2,.6,1) backwards;
      transition: background var(--transition-speed), color var(--transition-speed), box-shadow var(--transition-speed);
      /* (جديد) - إعطاء عمق للنص */
      transform: translateZ(25px); 
    }

    @keyframes fadeInBio {
      from { opacity: 0; transform: translateY(20px) translateZ(25px); }
      to { opacity: 1; transform: translateZ(25px); }
    }

    .social-icons {
      margin: 16px 0;
      display: flex;
      justify-content: center;
      gap: 22px;
      z-index: 1;
      animation: fadeInSocial 1.2s 0.7s cubic-bezier(.4,2,.6,1) backwards;
      /* (جديد) - إعطاء عمق للأيقونات */
      transform: translateZ(40px);
    }
    
    /* ... (باقي تنسيقات الأيقونات كما هي) ... */
     .social-icons a {
      background: var(--business-bg);
      color: var(--business-gold);
      border: 2.5px solid var(--business-gold);
      box-shadow: 0 0 8px var(--business-shadow);
      border-radius: 50%;
      transition: all var(--transition-speed);
      padding: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative; /* For tooltip */
    }
    .social-icons a:hover, .social-icons a:focus-visible {
      background: var(--business-gray);
      border-color: var(--business-dark);
      color: var(--business-dark);
      box-shadow: 0 0 16px var(--business-gold), 0 0 8px var(--business-shadow);
      transform: scale(1.08) rotate(-2deg);
      outline: none;
    }
    .social-icons svg {
      width: 28px;
      height: 28px;
      transition: filter var(--transition-speed), transform var(--transition-speed);
      fill: currentColor;
    }
    .social-icons a:hover svg, .social-icons a:focus-visible svg {
        filter: drop-shadow(0 0 5px var(--business-gold));
        transform: scale(1.1);
    }
    .social-icons a::after {
        content: attr(data-tooltip);
        position: absolute;
        bottom: 120%;
        left: 50%;
        transform: translateX(-50%);
        background-color: var(--business-dark);
        color: var(--business-bg);
        padding: 4px 8px;
        border-radius: 6px;
        font-size: 0.8rem;
        font-family: 'Cairo', sans-serif;
        white-space: nowrap;
        opacity: 0;
        visibility: hidden;
        transition: opacity var(--transition-speed), visibility var(--transition-speed), bottom var(--transition-speed);
        pointer-events: none;
    }
    .social-icons a:hover::after {
        opacity: 1;
        visibility: visible;
        bottom: 130%;
    }


    /* ... (باقي التنسيقات للأزرار وخلفية الأنيميشن) ... */
    .action-buttons {
      display: flex;
      gap: 12px;
      justify-content: center;
      margin: 16px auto;
      animation: fadeInBtn 1.2s 1s cubic-bezier(.4,2,.6,1) backwards;
      /* (جديد) - إعطاء عمق للأزرار */
      transform: translateZ(20px);
    }
    .call-btn, .copy-btn, .back-btn {
      flex-grow: 1;
      border: none;
      border-radius: 12px;
      padding: 10px 20px;
      font-size: 1.1rem;
      font-family: 'Montserrat', 'Cairo', sans-serif;
      font-weight: bold;
      letter-spacing: 1.1px;
      box-shadow: 0 2px 12px var(--business-shadow);
      cursor: pointer;
      transition: all var(--transition-speed);
      outline: none;
      text-decoration: none;
      text-shadow: none;
      text-align: center;
      display: block;
    }
    .call-btn {
      background: var(--business-gold);
      color: var(--business-white);
    }
    .copy-btn {
      background: var(--business-gray);
      color: var(--business-dark);
    }
    .back-btn {
      margin-top: 8px;
      background: var(--business-bg);
      color: var(--business-gold);
      border: 1px solid var(--business-gold);
      animation-delay: 1.2s; /* Delay for back button */
    }
    .call-btn:hover, .call-btn:focus-visible {
      background: var(--business-dark);
      color: var(--business-gold);
      box-shadow: 0 0 16px var(--business-gold), 0 0 8px var(--business-shadow);
      transform: scale(1.05);
    }
    .copy-btn:hover, .copy-btn:focus-visible, .back-btn:hover, .back-btn:focus-visible {
      background: var(--business-dark);
      color: var(--business-gray);
      border-color: var(--business-dark);
      box-shadow: 0 0 16px var(--business-gold), 0 0 8px var(--business-shadow);
      transform: scale(1.05);
    }
    .copy-btn.copied {
        background-color: #28a745;
        color: white;
    }
    @keyframes fadeInBtn {
      from { opacity: 0; transform: translateY(20px) scale(0.95); }
      to { opacity: 1; transform: none; }
    }
    .top-controls {
        position: fixed;
        top: 20px;
        left: 20px;
        z-index: 100;
        display: flex;
        gap: 10px;
    }
    .control-btn {
        background: var(--business-white);
        border: 2px solid var(--business-gold);
        color: var(--business-gold);
        width: 44px;
        height: 44px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
        box-shadow: 0 2px 8px var(--business-shadow);
        transition: all var(--transition-speed);
    }
    .control-btn:hover, .control-btn:focus-visible {
        transform: scale(1.1) rotate(5deg);
        background-color: var(--business-gold);
        color: var(--business-white);
        outline: none;
    }
    .control-btn svg {
        width: 24px;
        height: 24px;
        fill: currentColor;
    }
    .animated-bg {
      position: fixed;
      top: 0; left: 0; width: 100vw; height: 100vh;
      z-index: 0;
      pointer-events: none;
      background: radial-gradient(circle at 70% 20%, #bfa76a22 0%, transparent 60%),
                  radial-gradient(circle at 20% 80%, #2d3a4a22 0%, transparent 70%);
      overflow: hidden;
    }
    canvas#dev-anim {
      position: absolute;
      top: 0; left: 0; width: 100%; height: 100%;
      z-index: -1;
      pointer-events: none;
      opacity: 0.18;
    }
    [data-theme="dark"] canvas#dev-anim {
        opacity: 0.1;
    }

    @media (max-width: 600px) {
      /* (تعديل) - تعديل الـ margin للـ wrapper */
      .card-wrapper {
        margin-top: 60px; /* لترك مساحة للأزرار العلوية */
      }
      .business-card { 
        max-width: 95vw; 
        padding: 24px 4vw 24px 4vw; 
        border-radius: 24px; 
        /* (تعديل) - إزالة الـ margin-top من البطاقة نفسها */
        margin-top: 0; 
      }
      .avatar { width: 90px; height: 90px; }
      .dev-name { font-size: 1.8rem; }
      .dev-title, .dev-bio { font-size: 1rem; }
      .dev-bio { line-height: 1.9; }
      .social-icons svg { width: 24px; height: 24px; }
      .call-btn, .copy-btn, .back-btn { font-size: 1rem; padding: 12px 16px; }
      .top-controls { top: 10px; left: 10px; }
      .control-btn { width: 40px; height: 40px; }
    }
  </style>
</head>
<body>
  <div class="animated-bg">
    <canvas id="dev-anim"></canvas>
  </div>
  
  <div class="top-controls">
      <button id="theme-toggle-btn" class="control-btn" aria-label="تبديل الثيم">
        </button>
      <button id="sound-toggle-btn" class="control-btn" aria-label="كتم/تشغيل الصوت">
        </button>
  </div>

  <div class="card-wrapper">
    <div class="business-card" id="businessCard">
      <img src="uploads/images/myphoto.JPG" alt="صورة المطور يحيى رضا" class="avatar" id="devAvatar" />
      <div class="dev-name">يحيى رضا</div>
      <div class="dev-title">مبرمج ومطور ويب | Business Developer</div>
      <div class="dev-bio">
        خبير في بناء وتطوير مواقع وتطبيقات ويب عصرية للشركات والأفراد. أستخدم أحدث التقنيات وأهتم بأدق التفاصيل لتقديم نتائج احترافية ومبتكرة.
      </div>
      <div class="social-icons">
        <a href="#" id="waLink" target="_blank" data-tooltip="واتساب" aria-label="تواصل معي على واتساب">
            <svg viewBox="0 0 24 24"><path d="M12.04 2C6.58 2 2.13 6.45 2.13 11.91C2.13 13.66 2.61 15.35 3.5 16.84L2.09 21.91L7.31 20.5C8.75 21.34 10.36 21.82 12.04 21.82C17.5 21.82 21.95 17.37 21.95 11.91C21.95 6.45 17.5 2 12.04 2M12.04 3.67C16.56 3.67 20.28 7.39 20.28 11.91C20.28 16.43 16.56 20.15 12.04 20.15C10.51 20.15 9.05 19.73 7.8 18.95L7.33 18.66L4.45 19.43L5.24 16.63L4.92 16.12C4.03 14.78 3.56 13.25 3.56 11.91C3.56 7.39 7.28 3.67 12.04 3.67M9.1 7.69C8.89 7.69 8.7 7.78 8.56 7.99C8.41 8.21 8 8.92 8 9.89C8 10.85 8.58 11.76 8.71 11.93C8.83 12.11 10.13 14.15 12.04 14.9C13.63 15.54 14.2 15.5 14.62 15.46C15.13 15.41 16.03 14.86 16.25 14.24C16.47 13.62 16.47 13.11 16.4 13C16.32 12.89 16.14 12.83 15.9 12.7C15.66 12.58 14.53 12.02 14.31 11.94C14.09 11.86 13.94 11.81 13.79 12.04C13.65 12.26 13.13 12.83 13 12.97C12.87 13.11 12.73 13.13 12.52 13.04C12.31 12.95 11.41 12.65 10.33 11.69C9.52 10.97 9.03 10.12 8.91 9.89C8.8 9.67 8.93 9.54 9.04 9.43C9.14 9.32 9.27 9.15 9.4 9.02C9.53 8.88 9.57 8.79 9.64 8.66C9.72 8.53 9.68 8.41 9.61 8.32C9.55 8.23 9.1 7.78 9.1 7.69Z"></path></svg>
        </a>
        <a href="#" id="instaLink" target="_blank" data-tooltip="إنستجرام" aria-label="تابعني على انستجرام">
            <svg viewBox="0 0 24 24"><path d="M7.8,2H16.2C19.4,2 22,4.6 22,7.8V16.2A5.2,5.2 0,0 1,16.2 22H7.8C4.6,22 2,19.4 2,16.2V7.8A5.2,5.2 0,0 1,7.8 2M7.6,4A3.6,3.6 0,0 0,4 7.6V16.4A3.6,3.6 0,0 0,7.6 20H16.4A3.6,3.6 0,0 0,20 16.4V7.6A3.6,3.6 0,0 0,16.4 4H7.6M17.25,5.5A1.25,1.25 0,0 1,18.5 6.75A1.25,1.25 0,0 1,17.25 8A1.25,1.25 0,0 1,16 6.75A1.25,1.25 0,0 1,17.25 5.5M12,7A5,5 0,0 1,17 12A5,5 0,0 1,12 17A5,5 0,0 1,7 12A5,5 0,0 1,12 7M12,9A3,3 0,0 0,9 12A3,3 0,0 0,12 15A3,3 0,0 0,15 12A3,3 0,0 0,12 9Z"></path></svg>
        </a>
        <a href="#" id="fbLink" target="_blank" data-tooltip="فيسبوك" aria-label="تواصل معي على فيسبوك">
            <svg viewBox="0 0 24 24"><path d="M12 2.04C6.5 2.04 2 6.53 2 12.06C2 17.06 5.66 21.21 10.44 21.96V14.96H7.9V12.06H10.44V9.85C10.44 7.32 11.93 5.96 14.22 5.96C15.31 5.96 16.45 6.15 16.45 6.15V8.62H15.19C13.95 8.62 13.56 9.39 13.56 10.18V12.06H16.34L15.89 14.96H13.56V21.96A10,10 0,0 0,22 12.06C22 6.53 17.5 2.04 12 2.04Z"></path></svg>
        </a>
        <a href="#" id="phoneLink" data-tooltip="اتصال" aria-label="اتصل بي مباشرة">
            <svg viewBox="0 0 24 24"><path d="M6.62,10.79C8.06,13.62 10.38,15.94 13.21,17.38L15.41,15.18C15.69,14.9 16.08,14.82 16.43,14.93C17.55,15.3 18.75,15.5 20,15.5A1,1 0,0 1,21 16.5V20A1,1 0,0 1,20 21A17,17 0,0 1,3 4A1,1 0,0 1,4 3H7.5A1,1 0,0 1,8.5 4C8.5,5.25 8.7,6.45 9.07,7.57C9.18,7.92 9.1,8.31 8.82,8.59L6.62,10.79Z"></path></svg>
        </a>
      </div>

      <div class="action-buttons">
        <a href="#" id="callBtn" class="call-btn">اتصل الآن</a>
        <button class="copy-btn" id="copy-phone-btn">نسخ الرقم</button>
      </div>
      
      <a href="index.html" class="back-btn">العودة للرئيسية</a>
    </div>
  </div>
  
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    // =======================================================
    // 1. الإعدادات والمعلومات المركزية
    // =======================================================
    const config = {
      phone: '+201155528093',
      whatsapp: 'https://wa.me/201155528093',
      instagram: 'https://www.instagram.com/7x.y.b/',
      facebook: 'https://www.facebook.com/yhyy.rda.862071/?locale=ar_AR',
      sounds: {
        avatar: 'الأصوات/يحيى رضا.mp3',
        whatsapp: 'الأصوات/whatsapp.mp3',
        instagram: 'الأصوات/insta.mp3',
        facebook: 'الأصوات/ff.mp3',
        phone: 'الأصوات/رقمي.mp3',
        themeToggle: 'الأصوات/click.mp3', // صوت افتراضي
        copy: 'الأصوات/copy.mp3', // صوت افتراضي
      }
    };

    const elements = {
      html: document.documentElement,
      avatar: document.getElementById('devAvatar'),
      waLink: document.getElementById('waLink'),
      instaLink: document.getElementById('instaLink'),
      fbLink: document.getElementById('fbLink'),
      phoneLink: document.getElementById('phoneLink'),
      callBtn: document.getElementById('callBtn'),
      copyBtn: document.getElementById('copy-phone-btn'),
      themeToggleBtn: document.getElementById('theme-toggle-btn'),
      soundToggleBtn: document.getElementById('sound-toggle-btn'),
      canvas: document.getElementById('dev-anim'),
      // (جديد) - إضافة العناصر الجديدة
      cardWrapper: document.querySelector('.card-wrapper'),
      businessCard: document.getElementById('businessCard') 
    };
    
    const ctx = elements.canvas.getContext('2d');

    // =======================================================
    // 2. تحديث الروابط ديناميكياً
    // =======================================================
    elements.waLink.href = config.whatsapp;
    elements.instaLink.href = config.instagram;
    elements.fbLink.href = config.facebook;
    elements.phoneLink.href = `tel:${config.phone}`;
    elements.callBtn.href = `tel:${config.phone}`;

    // =======================================================
    // 3. نظام الثيم (فاتح/داكن)
    // =======================================================
    const themeIcons = {
        light: `<svg viewBox="0 0 24 24"><path d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,2A7,7 0 0,1 19,9C19,11.38 17.81,13.47 16,14.7V17A1,1 0 0,1 15,18H9A1,1 0 0,1 8,17V14.7C6.19,13.47 5,11.38 5,9A7,7 0 0,1 12,2M11,20A1,1 0 0,1 12,21A1,1 0 0,1 13,20H11Z"/></svg>`,
        dark: `<svg viewBox="0 0 24 24"><path d="M12 2A9.91 9.91 0 0 0 9 2.46A10 10 0 0 1 9 21.54A9.91 9.91 0 0 0 12 22A10 10 0 0 0 12 2Z"/></svg>`
    };
    let currentTheme = localStorage.getItem('theme') || 'light';
    
    function applyTheme(theme) {
        elements.html.setAttribute('data-theme', theme);
        elements.themeToggleBtn.innerHTML = theme === 'light' ? themeIcons.dark : themeIcons.light;
        localStorage.setItem('theme', theme);
    }

    elements.themeToggleBtn.addEventListener('click', () => {
        currentTheme = currentTheme === 'light' ? 'dark' : 'light';
        applyTheme(currentTheme);
        playSound(preloadedSounds.themeToggle);
    });
    
    applyTheme(currentTheme); // تطبيق الثيم عند التحميل

    // =======================================================
    // 4. نظام التحكم بالصوت
    // =======================================================
    const soundIcons = {
        on: `<svg viewBox="0 0 24 24"><path d="M14,3.23V5.29C16.89,6.15 19,8.83 19,12C19,15.17 16.89,17.84 14,18.7V20.77C18,19.86 21,16.28 21,12C21,7.72 18,4.14 14,3.23M16.5,12C16.5,10.23 15.5,8.71 14,7.97V16C15.5,15.29 16.5,13.76 16.5,12M3,9V15H7L12,20V4L7,9H3Z"/></svg>`,
        off: `<svg viewBox="0 0 24 24"><path d="M12,4L7,9H3V15H7L12,20V4M16.5,12C16.5,10.23 15.5,8.71 14,7.97V16C15.5,15.29 16.5,13.76 16.5,12M19,12C19,15.17 16.89,17.84 14,18.7V20.77C18,19.86 21,16.28 21,12C21,7.72 18,4.14 14,3.23V5.29C16.89,6.15 19,8.83 19,12M23.9,22.09L22.62,23.36L19.08,19.82L14,20.77V19.82L16.1,17.72L14,16.83V18.7L12.92,17.62L12,18.17V20L7,15H3V9H7L8.18,7.82L4.22,3.86L2.95,5.14L23.9,22.09Z"/></svg>`
    };
    let isMuted = localStorage.getItem('isMuted') === 'true';
    const preloadedSounds = {};

    function preloadSounds() {
        for (const key in config.sounds) {
            preloadedSounds[key] = new Audio(config.sounds[key]);
            preloadedSounds[key].onerror = () => console.warn(`Could not load sound: ${config.sounds[key]}`);
        }
    }
    
    function playSound(audio) {
        if (!isMuted && audio && audio.play) {
            audio.currentTime = 0;
            audio.play().catch(() => {});
        }
    }

    function applyMuteState(muted) {
        isMuted = muted;
        elements.soundToggleBtn.innerHTML = muted ? soundIcons.off : soundIcons.on;
        localStorage.setItem('isMuted', muted);
    }
    
    elements.soundToggleBtn.addEventListener('click', () => {
        applyMuteState(!isMuted);
    });

    applyMuteState(isMuted);
    preloadSounds();

    // ربط الأصوات بالأحداث (عند النقر بدلاً من المرور)
    elements.avatar.addEventListener('click', () => playSound(preloadedSounds.avatar));
    elements.waLink.addEventListener('click', () => playSound(preloadedSounds.whatsapp));
    elements.instaLink.addEventListener('click', () => playSound(preloadedSounds.instagram));
    elements.fbLink.addEventListener('click', () => playSound(preloadedSounds.facebook));
    elements.phoneLink.addEventListener('click', () => playSound(preloadedSounds.phone));

    // =======================================================
    // 5. وظيفة نسخ الرقم
    // =======================================================
    elements.copyBtn.addEventListener('click', () => {
        navigator.clipboard.writeText(config.phone).then(() => {
            playSound(preloadedSounds.copy);
            const originalText = elements.copyBtn.textContent;
            elements.copyBtn.textContent = 'تم النسخ!';
            elements.copyBtn.classList.add('copied');
            setTimeout(() => {
                elements.copyBtn.textContent = originalText;
                elements.copyBtn.classList.remove('copied');
            }, 2000);
        }).catch(err => {
            console.error('Failed to copy text: ', err);
            alert('فشل نسخ الرقم. يرجى النسخ يدوياً.');
        });
    });
    
    // =======================================================
    // 6. Canvas Animation (مع تفاعل الفأرة)
    // =======================================================
    // ... (الكود الخاص بك للـ Canvas Animation كما هو) ...
    // ... (تم تركه كما هو لأنه يعمل بشكل رائع) ...
    const mouse = { x: null, y: null, radius: 150 };
    window.addEventListener('mousemove', (event) => {
        mouse.x = event.x;
        mouse.y = event.y;
    });
    window.addEventListener('mouseout', () => {
        mouse.x = null;
        mouse.y = null;
    });

    function resizeAnim() {
      elements.canvas.width = window.innerWidth;
      elements.canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeAnim);
    resizeAnim();

    const lines = Array.from({length: 25}, () => ({
      x: Math.random() * elements.canvas.width,
      y: Math.random() * elements.canvas.height,
      len: 100 + Math.random() * 150,
      speed: 0.2 + Math.random() * 0.5,
      angle: Math.random() * Math.PI * 2,
      width: 1 + Math.random() * 1.5,
      alpha: 0.1 + Math.random() * 0.2,
      baseX: null,
      baseY: null,
      init() {
          this.baseX = this.x;
          this.baseY = this.y;
          return this;
      }
    }.init()));

    function drawAnim() {
      ctx.clearRect(0, 0, elements.canvas.width, elements.canvas.height);
      for (const l of lines) {
        ctx.save();
        ctx.globalAlpha = l.alpha;
        const grad = ctx.createLinearGradient(l.x, l.y, l.x + Math.cos(l.angle) * l.len, l.y + Math.sin(l.angle) * l.len);
        grad.addColorStop(0, '#bfa76a');
        grad.addColorStop(1, '#fffbe6');
        ctx.strokeStyle = grad;
        ctx.lineWidth = l.width;
        ctx.beginPath();
        ctx.moveTo(l.x, l.y);
        ctx.lineTo(l.x + Math.cos(l.angle) * l.len, l.y + Math.sin(l.angle) * l.len);
        ctx.stroke();
        ctx.restore();

        // التفاعل مع الفأرة
        if (mouse.x != null) {
            const dx = mouse.x - l.x;
            const dy = mouse.y - l.y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            if (distance < mouse.radius) {
                l.x -= dx / 20 * l.speed;
                l.y -= dy / 20 * l.speed;
            } else {
                l.x += (l.baseX - l.x) * 0.01;
                l.y += (l.baseY - l.y) * 0.01;
            }
        }
        
        // الحركة العادية
        l.x += Math.cos(l.angle) * l.speed;
        l.y += Math.sin(l.angle) * l.speed;
        
        // إعادة التعيين عند الخروج من الشاشة
        if(l.x < -l.len || l.x > elements.canvas.width + l.len || l.y < -l.len || l.y > elements.canvas.height + l.len) {
            const side = Math.floor(Math.random() * 4);
            switch(side) {
                case 0: l.x = -l.len; l.y = Math.random() * elements.canvas.height; break; // يسار
                case 1: l.x = elements.canvas.width + l.len; l.y = Math.random() * elements.canvas.height; break; // يمين
                case 2: l.x = Math.random() * elements.canvas.width; l.y = -l.len; break; // أعلى
                case 3: l.x = Math.random() * elements.canvas.width; l.y = elements.canvas.height + l.len; break; // أسفل
            }
              l.baseX = l.x;
              l.baseY = l.y;
        }
      }
      requestAnimationFrame(drawAnim);
    }
    drawAnim();
    
    // =======================================================
    // 7. (جديد) - تأثير الميل واللمعان "4D"
    // =======================================================
    if (elements.cardWrapper && elements.businessCard) {
      const maxRotate = 12; // أقصى درجة ميل

      elements.cardWrapper.addEventListener('mousemove', (e) => {
        const card = elements.businessCard;
        const rect = card.getBoundingClientRect();
        
        // حساب مركز البطاقة
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;
        
        // حساب الفارق بين مؤشر الفأرة ومركز البطاقة
        const deltaX = e.clientX - centerX;
        const deltaY = e.clientY - centerY;
        
        // تحويل الفارق إلى نسبة مئوية (من -0.5 إلى 0.5)
        const xPercent = deltaX / rect.width;
        const yPercent = deltaY / rect.height;
        
        // حساب زوايا الميل
        // (نعكس yPercent لجعل الميل متوافقاً مع حركة الفأرة)
        const rotateX = yPercent * -1 * maxRotate; 
        const rotateY = xPercent * maxRotate;
        
        // 1. تطبيق الميل على البطاقة
        card.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.02)`; // تكبير بسيط
        
        // 2. تحديث مكان اللمعان (بالنسبة للبطاقة)
        const glowX = (e.clientX - rect.left) / rect.width * 100;
        const glowY = (e.clientY - rect.top) / rect.height * 100;
        
        card.style.setProperty('--mouse-x', `${glowX}%`);
        card.style.setProperty('--mouse-y', `${glowY}%`);
        card.style.setProperty('--glow-opacity', '1');
      });

      elements.cardWrapper.addEventListener('mouseleave', () => {
        const card = elements.businessCard;
        // إعادة البطاقة لوضعها الطبيعي
        card.style.transform = `rotateX(0deg) rotateY(0deg) scale(1)`;
        // إخفاء اللمعان
        card.style.setProperty('--glow-opacity', '0');
      });
    }

  });
  </script>
</body>
</html>